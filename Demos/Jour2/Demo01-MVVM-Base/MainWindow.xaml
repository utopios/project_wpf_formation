<Window x:Class="MVVMBaseDemo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:MVVMBaseDemo.ViewModels"
        Title="Démo MVVM - INotifyPropertyChanged"
        Height="600" Width="800"
        Background="#F5F5F5">

    <!-- DataContext défini en XAML -->
    <Window.DataContext>
        <vm:PersonViewModel/>
    </Window.DataContext>

    <Grid Margin="30">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Formulaire de saisie -->
        <Border Background="White" CornerRadius="8" Padding="25" Margin="0,0,15,0">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="2"
                                 Opacity="0.1" Color="Black"/>
            </Border.Effect>

            <StackPanel>
                <TextBlock Text="Saisie des données"
                          FontSize="22" FontWeight="Bold"
                          Foreground="#2C3E50"
                          Margin="0,0,0,25"/>

                <!-- Prénom -->
                <TextBlock Text="PRÉNOM" FontSize="11" FontWeight="SemiBold"
                          Foreground="#7F8C8D" Margin="0,0,0,5"/>
                <TextBox Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged}"
                        Padding="12,10" FontSize="14"
                        Margin="0,0,0,15"/>

                <!-- Nom -->
                <TextBlock Text="NOM" FontSize="11" FontWeight="SemiBold"
                          Foreground="#7F8C8D" Margin="0,0,0,5"/>
                <TextBox Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged}"
                        Padding="12,10" FontSize="14"
                        Margin="0,0,0,15"/>

                <!-- Âge -->
                <TextBlock Text="ÂGE" FontSize="11" FontWeight="SemiBold"
                          Foreground="#7F8C8D" Margin="0,0,0,5"/>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                    <Slider x:Name="AgeSlider"
                           Value="{Binding Age}"
                           Minimum="0" Maximum="100"
                           Width="200"
                           VerticalAlignment="Center"/>
                    <TextBox Text="{Binding Age, UpdateSourceTrigger=PropertyChanged}"
                            Width="60" Padding="8,6"
                            Margin="15,0,0,0"
                            TextAlignment="Center"/>
                </StackPanel>

                <!-- Email -->
                <TextBlock Text="EMAIL" FontSize="11" FontWeight="SemiBold"
                          Foreground="#7F8C8D" Margin="0,0,0,5"/>
                <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                        Padding="12,10" FontSize="14"/>

                <!-- Explication -->
                <Border Background="#FFF3E0" CornerRadius="4"
                       Padding="15" Margin="0,25,0,0">
                    <StackPanel>
                        <TextBlock Text="UpdateSourceTrigger=PropertyChanged"
                                  FontWeight="SemiBold" FontSize="12"
                                  Foreground="#E65100"/>
                        <TextBlock Text="Met à jour le ViewModel à chaque frappe clavier (au lieu d'attendre la perte de focus)."
                                  TextWrapping="Wrap"
                                  Foreground="#BF360C"
                                  FontSize="12"
                                  Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>

        <!-- Affichage des données (binding) -->
        <Border Grid.Column="1" Background="White" CornerRadius="8"
               Padding="25" Margin="15,0,0,0">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="2"
                                 Opacity="0.1" Color="Black"/>
            </Border.Effect>

            <StackPanel>
                <TextBlock Text="Données liées (Binding)"
                          FontSize="22" FontWeight="Bold"
                          Foreground="#2C3E50"
                          Margin="0,0,0,25"/>

                <!-- Message de bienvenue -->
                <Border Background="#E8F5E9" CornerRadius="8"
                       Padding="20" Margin="0,0,0,20">
                    <TextBlock Text="{Binding Greeting}"
                              FontSize="18"
                              FontWeight="SemiBold"
                              Foreground="#2E7D32"
                              TextWrapping="Wrap"/>
                </Border>

                <!-- Propriétés calculées -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Nom complet :" FontWeight="SemiBold"
                              Margin="0,0,15,10"/>
                    <TextBlock Grid.Column="1" Text="{Binding FullName}"
                              Foreground="#3498DB" Margin="0,0,0,10"/>

                    <TextBlock Grid.Row="1" Text="Email :" FontWeight="SemiBold"
                              Margin="0,0,15,10"/>
                    <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Email}"
                              Foreground="#3498DB" Margin="0,0,0,10"/>

                    <TextBlock Grid.Row="2" Text="Âge :" FontWeight="SemiBold"
                              Margin="0,0,15,10"/>
                    <TextBlock Grid.Row="2" Grid.Column="1"
                              Foreground="#3498DB" Margin="0,0,0,10">
                        <Run Text="{Binding Age, Mode=OneWay}"/>
                        <Run Text=" ans"/>
                    </TextBlock>

                    <TextBlock Grid.Row="3" Text="Catégorie :" FontWeight="SemiBold"
                              Margin="0,0,15,10"/>
                    <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding AgeCategory}"
                              Foreground="#3498DB" Margin="0,0,0,10"/>

                    <TextBlock Grid.Row="4" Text="Majeur :" FontWeight="SemiBold"
                              Margin="0,0,15,10"/>
                    <TextBlock Grid.Row="4" Grid.Column="1" Margin="0,0,0,10">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Text" Value="Non"/>
                                <Setter Property="Foreground" Value="#E74C3C"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsAdult}" Value="True">
                                        <Setter Property="Text" Value="Oui"/>
                                        <Setter Property="Foreground" Value="#27AE60"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </Grid>

                <!-- Explication INPC -->
                <Border Background="#E3F2FD" CornerRadius="4"
                       Padding="15" Margin="0,20,0,0">
                    <StackPanel>
                        <TextBlock Text="INotifyPropertyChanged"
                                  FontWeight="SemiBold" FontSize="12"
                                  Foreground="#1565C0"/>
                        <TextBlock TextWrapping="Wrap"
                                  Foreground="#0D47A1"
                                  FontSize="12"
                                  Margin="0,5,0,0">
                            Le ViewModel notifie la View des changements via
                            l'événement PropertyChanged. Les propriétés calculées
                            (FullName, Greeting) sont notifiées manuellement.
                        </TextBlock>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>
    </Grid>
</Window>
