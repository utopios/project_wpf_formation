<Window x:Class="ToolkitDemo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:ToolkitDemo.ViewModels"
        Title="Démo - CommunityToolkit.Mvvm"
        Height="700" Width="900"
        Background="#F5F5F5">

    <Window.DataContext>
        <vm:PersonViewModel/>
    </Window.DataContext>

    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Colonne gauche: Formulaire -->
        <Border Background="White" CornerRadius="8" Padding="25" Margin="0,0,10,0">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.1"/>
            </Border.Effect>

            <StackPanel>
                <TextBlock Text="CommunityToolkit.Mvvm"
                          FontSize="24" FontWeight="Bold"
                          Foreground="#2C3E50" Margin="0,0,0,5"/>
                <TextBlock Text="Générateurs de source pour MVVM"
                          Foreground="Gray" Margin="0,0,0,20"/>

                <!-- Prénom -->
                <TextBlock Text="PRÉNOM" FontSize="11" FontWeight="SemiBold"
                          Foreground="#7F8C8D" Margin="0,0,0,5"/>
                <TextBox Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged}"
                        Padding="12,10" Margin="0,0,0,15"/>

                <!-- Nom -->
                <TextBlock Text="NOM" FontSize="11" FontWeight="SemiBold"
                          Foreground="#7F8C8D" Margin="0,0,0,5"/>
                <TextBox Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged}"
                        Padding="12,10" Margin="0,0,0,15"/>

                <!-- Âge avec boutons +/- -->
                <TextBlock Text="ÂGE" FontSize="11" FontWeight="SemiBold"
                          Foreground="#7F8C8D" Margin="0,0,0,5"/>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                    <Button Content="−" Width="40" Height="40"
                           FontSize="20" FontWeight="Bold"
                           Command="{Binding DecrementAgeCommand}"/>
                    <TextBox Text="{Binding Age, UpdateSourceTrigger=PropertyChanged}"
                            Width="80" Padding="10,8" Margin="10,0"
                            TextAlignment="Center" FontSize="16"/>
                    <Button Content="+" Width="40" Height="40"
                           FontSize="20" FontWeight="Bold"
                           Command="{Binding IncrementAgeCommand}"/>
                </StackPanel>

                <!-- Boutons raccourcis d'âge -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                    <Button Content="10 ans" Padding="10,5"
                           Command="{Binding SetAgeCommand}"
                           CommandParameter="10" Margin="0,0,5,0"/>
                    <Button Content="25 ans" Padding="10,5"
                           Command="{Binding SetAgeCommand}"
                           CommandParameter="25" Margin="0,0,5,0"/>
                    <Button Content="50 ans" Padding="10,5"
                           Command="{Binding SetAgeCommand}"
                           CommandParameter="50" Margin="0,0,5,0"/>
                    <Button Content="70 ans" Padding="10,5"
                           Command="{Binding SetAgeCommand}"
                           CommandParameter="70"/>
                </StackPanel>

                <!-- Email -->
                <TextBlock Text="EMAIL" FontSize="11" FontWeight="SemiBold"
                          Foreground="#7F8C8D" Margin="0,0,0,5"/>
                <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                        Padding="12,10" Margin="0,0,0,20"/>

                <!-- Boutons d'action -->
                <StackPanel Orientation="Horizontal">
                    <Button Content="Dire bonjour"
                           Command="{Binding SayHelloCommand}"
                           Padding="15,10" Margin="0,0,10,0"
                           Background="#3498DB" Foreground="White"/>
                    <Button Content="Charger données"
                           Command="{Binding LoadDataCommand}"
                           Padding="15,10" Margin="0,0,10,0"
                           Background="#27AE60" Foreground="White"/>
                    <Button Content="Reset"
                           Command="{Binding ResetCommand}"
                           Padding="15,10"
                           Background="#E74C3C" Foreground="White"/>
                </StackPanel>

                <!-- Indicateur async -->
                <StackPanel Orientation="Horizontal" Margin="0,10,0,0"
                           Visibility="{Binding LoadDataCommand.IsRunning,
                                        Converter={StaticResource BoolToVis}}">
                    <TextBlock Text="⏳" Margin="0,0,5,0"/>
                    <TextBlock Text="Chargement en cours..." Foreground="#F39C12"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Colonne droite: Résultats et explications -->
        <StackPanel Grid.Column="1" Margin="10,0,0,0">

            <!-- Résultats -->
            <Border Background="White" CornerRadius="8" Padding="25" Margin="0,0,0,15">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.1"/>
                </Border.Effect>

                <StackPanel>
                    <TextBlock Text="Propriétés calculées"
                              FontSize="18" FontWeight="SemiBold"
                              Foreground="#2C3E50" Margin="0,0,0,15"/>

                    <!-- Greeting -->
                    <Border Background="#E8F5E9" CornerRadius="8"
                           Padding="15" Margin="0,0,0,15">
                        <TextBlock Text="{Binding Greeting}"
                                  FontSize="16" FontWeight="SemiBold"
                                  Foreground="#2E7D32" TextWrapping="Wrap"/>
                    </Border>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="Nom complet:" FontWeight="SemiBold" Margin="0,0,15,8"/>
                        <TextBlock Grid.Column="1" Text="{Binding FullName}"
                                  Foreground="#3498DB" Margin="0,0,0,8"/>

                        <TextBlock Grid.Row="1" Text="Catégorie:" FontWeight="SemiBold" Margin="0,0,15,8"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding AgeCategory}"
                                  Foreground="#3498DB" Margin="0,0,0,8"/>

                        <TextBlock Grid.Row="2" Text="Majeur:" FontWeight="SemiBold" Margin="0,0,15,0"/>
                        <TextBlock Grid.Row="2" Grid.Column="1">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Text" Value="Non"/>
                                    <Setter Property="Foreground" Value="#E74C3C"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsAdult}" Value="True">
                                            <Setter Property="Text" Value="Oui"/>
                                            <Setter Property="Foreground" Value="#27AE60"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </Grid>

                    <!-- Message -->
                    <Border Background="#FFF3E0" CornerRadius="4"
                           Padding="10" Margin="0,15,0,0"
                           Visibility="{Binding Message, Converter={StaticResource StringToVis}}">
                        <TextBlock Text="{Binding Message}"
                                  Foreground="#E65100" TextWrapping="Wrap"/>
                    </Border>
                </StackPanel>
            </Border>

            <!-- Explications -->
            <Border Background="White" CornerRadius="8" Padding="20">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.1"/>
                </Border.Effect>

                <StackPanel>
                    <TextBlock Text="Attributs du Toolkit"
                              FontSize="16" FontWeight="SemiBold"
                              Foreground="#2C3E50" Margin="0,0,0,15"/>

                    <Border Background="#E3F2FD" CornerRadius="4" Padding="10" Margin="0,0,0,10">
                        <StackPanel>
                            <TextBlock Text="[ObservableProperty]" FontWeight="SemiBold"
                                      Foreground="#1565C0" FontFamily="Consolas"/>
                            <TextBlock Text="Génère propriété + INPC automatiquement"
                                      Foreground="#0D47A1" FontSize="12"/>
                        </StackPanel>
                    </Border>

                    <Border Background="#E8F5E9" CornerRadius="4" Padding="10" Margin="0,0,0,10">
                        <StackPanel>
                            <TextBlock Text="[RelayCommand]" FontWeight="SemiBold"
                                      Foreground="#2E7D32" FontFamily="Consolas"/>
                            <TextBlock Text="Génère ICommand depuis une méthode"
                                      Foreground="#1B5E20" FontSize="12"/>
                        </StackPanel>
                    </Border>

                    <Border Background="#FFF3E0" CornerRadius="4" Padding="10" Margin="0,0,0,10">
                        <StackPanel>
                            <TextBlock Text="[NotifyPropertyChangedFor]" FontWeight="SemiBold"
                                      Foreground="#E65100" FontFamily="Consolas"/>
                            <TextBlock Text="Notifie les propriétés dépendantes"
                                      Foreground="#BF360C" FontSize="12"/>
                        </StackPanel>
                    </Border>

                    <Border Background="#FCE4EC" CornerRadius="4" Padding="10">
                        <StackPanel>
                            <TextBlock Text="[NotifyCanExecuteChangedFor]" FontWeight="SemiBold"
                                      Foreground="#C2185B" FontFamily="Consolas"/>
                            <TextBlock Text="Rafraîchit CanExecute d'une commande"
                                      Foreground="#880E4F" FontSize="12"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
        </StackPanel>
    </Grid>

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>

        <!-- Convertisseur string vers visibility -->
        <local:StringToVisibilityConverter x:Key="StringToVis"
                                           xmlns:local="clr-namespace:ToolkitDemo.Converters"/>
    </Window.Resources>
</Window>
