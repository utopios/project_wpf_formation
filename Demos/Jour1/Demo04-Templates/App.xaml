<Application x:Class="TemplatesDemo.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:TemplatesDemo"
             StartupUri="MainWindow.xaml">
    <Application.Resources>

        <!-- Couleurs -->
        <Color x:Key="PrimaryColor">#E94E1B</Color>
        <Color x:Key="SecondaryColor">#2C3E50</Color>
        <Color x:Key="SuccessColor">#27AE60</Color>
        <Color x:Key="WarningColor">#F39C12</Color>
        <Color x:Key="DangerColor">#E74C3C</Color>

        <SolidColorBrush x:Key="PrimaryBrush" Color="{StaticResource PrimaryColor}"/>
        <SolidColorBrush x:Key="SecondaryBrush" Color="{StaticResource SecondaryColor}"/>
        <SolidColorBrush x:Key="SuccessBrush" Color="{StaticResource SuccessColor}"/>
        <SolidColorBrush x:Key="WarningBrush" Color="{StaticResource WarningColor}"/>
        <SolidColorBrush x:Key="DangerBrush" Color="{StaticResource DangerColor}"/>

        <!-- ControlTemplate: Bouton personnalisÃ© avec effet de ripple -->
        <ControlTemplate x:Key="RippleButtonTemplate" TargetType="Button">
            <Border x:Name="border"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="25"
                    Padding="{TemplateBinding Padding}"
                    ClipToBounds="True">
                <Grid>
                    <!-- Effet de hover -->
                    <Border x:Name="hoverEffect"
                            Background="White"
                            Opacity="0"
                            CornerRadius="25"/>

                    <!-- Contenu du bouton -->
                    <ContentPresenter HorizontalAlignment="Center"
                                     VerticalAlignment="Center"/>
                </Grid>
            </Border>

            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation
                                    Storyboard.TargetName="hoverEffect"
                                    Storyboard.TargetProperty="Opacity"
                                    To="0.2" Duration="0:0:0.2"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation
                                    Storyboard.TargetName="hoverEffect"
                                    Storyboard.TargetProperty="Opacity"
                                    To="0" Duration="0:0:0.2"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>

                <Trigger Property="IsPressed" Value="True">
                    <Setter TargetName="hoverEffect" Property="Opacity" Value="0.3"/>
                </Trigger>

                <Trigger Property="IsEnabled" Value="False">
                    <Setter TargetName="border" Property="Opacity" Value="0.5"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <!-- ControlTemplate: ProgressBar circulaire -->
        <ControlTemplate x:Key="CircularProgressTemplate" TargetType="ProgressBar">
            <Grid Width="80" Height="80">
                <!-- Cercle de fond -->
                <Ellipse Stroke="#E0E0E0" StrokeThickness="8" Fill="Transparent"/>

                <!-- Arc de progression (simplifiÃ© avec un cercle rempli) -->
                <Ellipse x:Name="progressArc"
                        Stroke="{TemplateBinding Foreground}"
                        StrokeThickness="8"
                        Fill="Transparent"
                        StrokeDashArray="2.5 100"
                        RenderTransformOrigin="0.5,0.5">
                    <Ellipse.RenderTransform>
                        <RotateTransform Angle="-90"/>
                    </Ellipse.RenderTransform>
                </Ellipse>

                <!-- Valeur au centre -->
                <TextBlock Text="{Binding Value, RelativeSource={RelativeSource TemplatedParent}, StringFormat={}{0:0}%}"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"
                          FontSize="16"
                          FontWeight="Bold"
                          Foreground="{TemplateBinding Foreground}"/>
            </Grid>
        </ControlTemplate>

        <!-- DataTemplate: Carte de produit -->
        <DataTemplate x:Key="ProductCardTemplate" DataType="{x:Type local:Product}">
            <Border Background="White"
                    CornerRadius="8"
                    Padding="16"
                    Margin="8"
                    Width="200">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2"
                                     Opacity="0.15" Color="Black"/>
                </Border.Effect>

                <StackPanel>
                    <!-- Image placeholder -->
                    <Border Background="#F0F0F0"
                            Height="120"
                            CornerRadius="4"
                            Margin="0,0,0,12">
                        <TextBlock Text="ðŸ“¦"
                                  FontSize="40"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"/>
                    </Border>

                    <!-- Nom du produit -->
                    <TextBlock Text="{Binding Name}"
                              FontSize="16"
                              FontWeight="SemiBold"
                              TextTrimming="CharacterEllipsis"/>

                    <!-- CatÃ©gorie -->
                    <TextBlock Text="{Binding Category}"
                              FontSize="12"
                              Foreground="Gray"
                              Margin="0,4,0,8"/>

                    <!-- Prix et stock -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock FontSize="18"
                                  FontWeight="Bold"
                                  Foreground="{StaticResource PrimaryBrush}">
                            <Run Text="{Binding Price, StringFormat={}{0:C}}"/>
                        </TextBlock>

                        <Border Grid.Column="1"
                                Padding="6,2"
                                CornerRadius="4">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="Background" Value="{StaticResource SuccessBrush}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsLowStock}" Value="True">
                                            <Setter Property="Background" Value="{StaticResource WarningBrush}"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding IsOutOfStock}" Value="True">
                                            <Setter Property="Background" Value="{StaticResource DangerBrush}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="{Binding StockStatus}"
                                      Foreground="White"
                                      FontSize="10"
                                      FontWeight="SemiBold"/>
                        </Border>
                    </Grid>
                </StackPanel>
            </Border>
        </DataTemplate>

        <!-- DataTemplate: Item de liste simple -->
        <DataTemplate x:Key="UserListItemTemplate" DataType="{x:Type local:User}">
            <Border Padding="12" BorderBrush="#E0E0E0" BorderThickness="0,0,0,1">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="50"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Avatar -->
                    <Border Width="40" Height="40"
                            CornerRadius="20"
                            Background="{StaticResource SecondaryBrush}">
                        <TextBlock Text="{Binding Initials}"
                                  Foreground="White"
                                  FontWeight="Bold"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"/>
                    </Border>

                    <!-- Infos -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock Text="{Binding FullName}"
                                  FontWeight="SemiBold"
                                  FontSize="14"/>
                        <TextBlock Text="{Binding Email}"
                                  Foreground="Gray"
                                  FontSize="12"/>
                    </StackPanel>

                    <!-- Status -->
                    <Border Grid.Column="2"
                            VerticalAlignment="Center"
                            Padding="8,4"
                            CornerRadius="4">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Setter Property="Background" Value="#E8F5E9"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsActive}" Value="False">
                                        <Setter Property="Background" Value="#FFEBEE"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                        <TextBlock FontSize="11" FontWeight="SemiBold">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Text" Value="Actif"/>
                                    <Setter Property="Foreground" Value="{StaticResource SuccessBrush}"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsActive}" Value="False">
                                            <Setter Property="Text" Value="Inactif"/>
                                            <Setter Property="Foreground" Value="{StaticResource DangerBrush}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </Border>
                </Grid>
            </Border>
        </DataTemplate>

    </Application.Resources>
</Application>
